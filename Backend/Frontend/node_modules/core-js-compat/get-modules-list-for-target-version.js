'use strict';
<<<<<<< HEAD
const { coerce, lte } = require('semver');
const modulesByVersions = require('./modules-by-versions');

module.exports = function (raw) {
  const corejs = coerce(String(raw));
=======
const { compare, intersection, semver } = require('./helpers');
const modulesByVersions = require('./modules-by-versions');
const modules = require('./modules');

module.exports = function (raw) {
  const corejs = semver(raw);
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967
  if (corejs.major !== 3) {
    throw RangeError('This version of `core-js-compat` works only with `core-js@3`.');
  }
  const result = [];
  for (const version of Object.keys(modulesByVersions)) {
<<<<<<< HEAD
    if (lte(coerce(version), corejs)) {
      result.push(...modulesByVersions[version]);
    }
  }
  return result;
=======
    if (compare(version, '<=', corejs)) {
      result.push(...modulesByVersions[version]);
    }
  }
  return intersection(result, modules);
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967
};
