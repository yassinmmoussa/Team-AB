<<<<<<< HEAD
import {createFrame, extend, toString} from './utils';
import Exception from './exception';
import {registerDefaultHelpers} from './helpers';
import {registerDefaultDecorators} from './decorators';
import logger from './logger';

export const VERSION = '4.5.1';
=======
import { createFrame, extend, toString } from './utils';
import Exception from './exception';
import { registerDefaultHelpers } from './helpers';
import { registerDefaultDecorators } from './decorators';
import logger from './logger';
import { resetLoggedProperties } from './internal/proto-access';

export const VERSION = '4.7.1';
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967
export const COMPILER_REVISION = 8;
export const LAST_COMPATIBLE_COMPILER_REVISION = 7;

export const REVISION_CHANGES = {
  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it
  2: '== 1.0.0-rc.3',
  3: '== 1.0.0-rc.4',
  4: '== 1.x.x',
  5: '== 2.0.0-alpha.x',
  6: '>= 2.0.0-beta.1',
  7: '>= 4.0.0 <4.3.0',
  8: '>= 4.3.0'
};

const objectType = '[object Object]';

export function HandlebarsEnvironment(helpers, partials, decorators) {
  this.helpers = helpers || {};
  this.partials = partials || {};
  this.decorators = decorators || {};

  registerDefaultHelpers(this);
  registerDefaultDecorators(this);
}

HandlebarsEnvironment.prototype = {
  constructor: HandlebarsEnvironment,

  logger: logger,
  log: logger.log,

  registerHelper: function(name, fn) {
    if (toString.call(name) === objectType) {
<<<<<<< HEAD
      if (fn) { throw new Exception('Arg not supported with multiple helpers'); }
=======
      if (fn) {
        throw new Exception('Arg not supported with multiple helpers');
      }
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967
      extend(this.helpers, name);
    } else {
      this.helpers[name] = fn;
    }
  },
  unregisterHelper: function(name) {
    delete this.helpers[name];
  },

  registerPartial: function(name, partial) {
    if (toString.call(name) === objectType) {
      extend(this.partials, name);
    } else {
      if (typeof partial === 'undefined') {
<<<<<<< HEAD
        throw new Exception(`Attempting to register a partial called "${name}" as undefined`);
=======
        throw new Exception(
          `Attempting to register a partial called "${name}" as undefined`
        );
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967
      }
      this.partials[name] = partial;
    }
  },
  unregisterPartial: function(name) {
    delete this.partials[name];
  },

  registerDecorator: function(name, fn) {
    if (toString.call(name) === objectType) {
<<<<<<< HEAD
      if (fn) { throw new Exception('Arg not supported with multiple decorators'); }
=======
      if (fn) {
        throw new Exception('Arg not supported with multiple decorators');
      }
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967
      extend(this.decorators, name);
    } else {
      this.decorators[name] = fn;
    }
  },
  unregisterDecorator: function(name) {
    delete this.decorators[name];
<<<<<<< HEAD
=======
  },
  /**
   * Reset the memory of illegal property accesses that have already been logged.
   * @deprecated should only be used in handlebars test-cases
   */
  resetLoggedPropertyAccesses() {
    resetLoggedProperties();
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967
  }
};

export let log = logger.log;

<<<<<<< HEAD
export {createFrame, logger};
=======
export { createFrame, logger };
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967
