<<<<<<< HEAD
import {appendContextPath, createFrame, isArray} from '../utils';
=======
import { appendContextPath, createFrame, isArray } from '../utils';
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967

export default function(instance) {
  instance.registerHelper('blockHelperMissing', function(context, options) {
    let inverse = options.inverse,
<<<<<<< HEAD
        fn = options.fn;
=======
      fn = options.fn;
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967

    if (context === true) {
      return fn(this);
    } else if (context === false || context == null) {
      return inverse(this);
    } else if (isArray(context)) {
      if (context.length > 0) {
        if (options.ids) {
          options.ids = [options.name];
        }

        return instance.helpers.each(context, options);
      } else {
        return inverse(this);
      }
    } else {
      if (options.data && options.ids) {
        let data = createFrame(options.data);
<<<<<<< HEAD
        data.contextPath = appendContextPath(options.data.contextPath, options.name);
        options = {data: data};
=======
        data.contextPath = appendContextPath(
          options.data.contextPath,
          options.name
        );
        options = { data: data };
>>>>>>> 0ae1a948acc774b725d2813ed0b826c52e048967
      }

      return fn(context, options);
    }
  });
}
